\documentclass[a4paper,12pt,twoside]{report}

% ====== Encodage & langue ======
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}

% ====== Mise en page ======
\usepackage[top=2.8cm, bottom=2.8cm, left=2.2cm, right=2.2cm]{geometry}
\usepackage{setspace}
\onehalfspacing
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}
\renewcommand{\headrulewidth}{0.3pt}
\renewcommand{\footrulewidth}{0pt}
\fancyfoot[L]{ENSIAS - IDSIT 2024/2025}
\fancyfoot[R]{Chaos Engineering}

% ====== Liens ======
\usepackage[hidelinks]{hyperref}

% ====== Graphiques & tableaux ======
\usepackage{graphicx}
\graphicspath{{images/}}
\usepackage{float}
\usepackage{subcaption}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{array}
\usepackage{caption}
\captionsetup{font=small, labelfont=bf}

% ====== Code ======
\usepackage{xcolor}
\usepackage{listings}
\lstset{
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue!70!black},
  stringstyle=\color{red!60!black},
  commentstyle=\color{gray!70!black},
  numbers=left,
  numberstyle=\tiny\color{gray},
  stepnumber=1,
  numbersep=8pt,
  showstringspaces=false,
  breaklines=true,
  frame=single,
  rulecolor=\color{black!20},
  tabsize=2
}
\lstdefinelanguage{YAML}{%
  keywords={true,false,null,y,n},
  sensitive=false,
  comment=[l]{\#},
  morestring=[b]',
  morestring=[b]"
}

% ====== Boîte "placeholder" pour figures ======
\usepackage{tikz}
\newcommand{\placeholder}[2]{%
\begin{tikzpicture}
\node[draw, dashed, minimum width=#1, minimum height=#2, align=center] {Placez ici la figure\\ \footnotesize (capture Grafana/JMeter/diagramme)};
\end{tikzpicture}
}

% ====== Environnements annexes ======
\usepackage{enumitem}
\setlist[itemize]{leftmargin=1.2cm}
\setlist[enumerate]{leftmargin=1.2cm}

% ====== Métadonnées ======
\newcommand{\titre}{Résilience et Chaos Engineering}
\newcommand{\encadrant}{Pr.\,\,Karima MOUMANE\,}
\newcommand{\filiere}{IDSIT}
\newcommand{\ecole}{ENSIAS}

% =================== DEBUT DOCUMENT ===================
\begin{document}

% ---------- Page de garde ----------
\begin{titlepage}
\begin{center}
\includegraphics[width=0.22\textwidth]{ensias}\hfill
\includegraphics[width=0.22\textwidth]{um5}\\[1.5cm]

{\Large \textbf{\ecole} - Filière \textbf{\filiere}}\\[0.6cm]
{\large Année universitaire 2025/2026}\\[1.5cm]

\rule{\textwidth}{1pt}\\[0.4cm]
{\LARGE \textbf{\titre}}\\[0.1cm]
{\large \textit{Microservices Resilience Testing with Chaos Engineering}}\\[0.4cm]
\rule{\textwidth}{1pt}\\[1.4cm]

\begin{tabular}{p{0.45\textwidth}p{0.45\textwidth}}
\textbf{Réalisé par :} & \textbf{Encadré par :}\\
Mokhtar BENKIRANE & \encadrant\\
Mohammed FADLOUALLAH & \\
Firas MAHBOUB & \\
Aymane JAMAL & \\
\end{tabular}

\vfill
Rabat, \today
\end{center}
\end{titlepage}

% ---------- Remerciements ----------
\chapter*{Remerciements}
\addcontentsline{toc}{chapter}{Remerciements}

Nous tenons à remercier chaleureusement l'ensemble du corps enseignant de l'ENSIAS pour la qualité de l'encadrement et des échanges pédagogiques tout au long de ce projet. 
Nos remerciements s'adressent en particulier à \textbf{\encadrant} pour ses conseils, ses retours méthodologiques et son exigence scientifique, qui ont guidé notre démarche expérimentale.
Nous exprimons également notre gratitude aux membres de nos promotions et à toutes les personnes ayant contribué à la mise en place de l'infrastructure, à l'exécution des tests et à l'analyse des résultats. 
Enfin, nous remercions nos proches pour leur soutien constant.


% ---------- Résumé ----------
\chapter*{Résumé}
\addcontentsline{toc}{chapter}{Résumé}

Ce travail étudie la \textbf{résilience} d'une plateforme e-commerce \textit{microservices} déployée avec Docker et instrumentée par \textbf{Prometheus}, \textbf{Grafana} et \textbf{cAdvisor}. 
La méthodologie combine des \textbf{tests de charge} (\textit{Apache JMeter}) et l'\textbf{injection de fautes} (\textit{Pumba}) afin d'observer, sous charge réaliste, la dégradation des \textit{SLI} (latence p95, throughput, taux d'erreurs) et la \textit{disponibilité}. 
Nous évaluons plusieurs scénarios: arrêt gracieux et crash de conteneur, latence et perte réseau (\texttt{netem}), et micro-coupures périodiques. 
Les résultats montrent que, dans une topologie à instance unique par service, \textbf{product-service} constitue un \textit{SPOF} critique: un \texttt{kill} sans politique de redémarrage conduit à une indisponibilité complète, tandis qu'une simple latence réseau dégrade fortement p95 et le débit. 
Nous proposons ensuite une \textbf{stratégie de tolérance} fondée sur la réplication et un \textbf{load balancing} au niveau de l'API Gateway (Spring Cloud LoadBalancer), complétée par des garde-fous \textit{timeouts/retries/circuit breaker}. 
Cette approche réduit l'impact des pannes et stabilise les métriques sous charge. 
Le rapport fournit la configuration \texttt{docker-compose}, les scénarios JMeter et les commandes Pumba, ainsi que des recommandations opérationnelles pour intégrer des exercices de chaos dans le cycle de vie applicatif.


% ---------- Abstract ----------
\chapter*{Abstract}
\addcontentsline{toc}{chapter}{Abstract}

This project investigates the \textbf{resilience} of a Docker-based \textit{microservices} e-commerce platform instrumented with \textbf{Prometheus}, \textbf{Grafana}, and \textbf{cAdvisor}. 
Our method combines \textbf{load testing} (\textit{Apache JMeter}) with \textbf{fault injection} (\textit{Pumba}) to observe, under realistic load, the degradation of \textit{SLIs} (p95 latency, throughput, error rate) and service \textit{availability}. 
We evaluate graceful stops and hard crashes of containers, network delay and packet loss via \texttt{netem}, and periodic micro-outages. 
In a single-instance-per-service topology, \textbf{product-service} acts as a critical \textit{SPOF}: a container \texttt{kill} without restart policy leads to full outage, while added latency significantly worsens p95 and throughput. 
We then implement a \textbf{tolerance strategy} based on replication and \textbf{load balancing} at the API Gateway (Spring Cloud LoadBalancer), complemented with timeouts, retries, and circuit breakers. 
This reduces failure impact and stabilizes metrics under load. 
We provide \texttt{docker-compose} snippets, JMeter scenarios, and Pumba commands, and conclude with actionable recommendations to embed chaos exercises into the software delivery lifecycle.



% ---------- Listes ----------
\tableofcontents
\listoffigures
\listoftables
\newpage

% ---------- Abréviations ----------
\chapter*{Liste des abréviations}
\addcontentsline{toc}{chapter}{Liste des abréviations}
\begin{tabular}{@{}ll@{}}
API & Application Programming Interface\\
CI/CD & Continuous Integration / Continuous Delivery\\
DB & DataBase\\
GC & Garbage Collector\\
HTTP & HyperText Transfer Protocol\\
JVM & Java Virtual Machine\\
p95 & 95\textsuperscript{e} percentile (latence)\\
RPS & Requêtes par seconde\\
SLA & Service Level Agreement\\
SLI & Service Level Indicator\\
SLO & Service Level Objective\\
SPOF & Single Point of Failure\\
OOM & Out Of Memory\\
\end{tabular}

\newpage

% =====================================================
% CHAPITRES
% =====================================================
\input{chapters/introduction}

\input{chapters/chapter1-deployment}

\input{chapters/chapter2-fault-injection}

\input{chapters/chapitre3-Monitoring}

\input{chapters/chapter3-impact-measurement}

\input{chapters/chapter4-tolerance-strategies}

\input{chapters/conclusion}

\end{document}
